name: Build & Render LoreJump Shorts

on: push: branches: - main workflow_dispatch:

jobs: build: runs-on: ubuntu-latest

steps:
  - name: Checkout repository
    uses: actions/checkout@v3

  - name: Set up Python
    uses: actions/setup-python@v4
    with:
      python-version: '3.10'

  - name: Install dependencies
    run: |
      python -m pip install --upgrade pip
      pip install -r requirements.txt
      sudo apt update
      sudo apt install ffmpeg -y

  - name: Run bot build script
    run: |
      python build.py
    env:
      YT_ACCESS_TOKEN: ${{ secrets.YT_ACCESS_TOKEN }}
      GOOGLE_API_KEY: ${{ secrets.GOOGLE_API_KEY }}
      GOOGLE_CLIENT_ID: ${{ secrets.GOOGLE_CLIENT_ID }}
      GOOGLE_CLIENT_SECRET: ${{ secrets.GOOGLE_CLIENT_SECRET }}
      REFRESH_TOKEN: ${{ secrets.REFRESH_TOKEN }}
      YT_CHANNEL_ID: ${{ secrets.YT_CHANNEL_ID }}

